# RefConfMiner

Forked From: https://github.com/ualberta-smr/refactoring-analysis-results

#### Python scripts to analyze MySql data generated by https://github.com/Symbolk/RefactoringsInMergeCommits, which mines merge scenarios with refactoring-related merge conflict(s) from Git repositories.

### Requirements

- Windows (recommended)/Linux/macOS
- Python 3.7
- MySQL 5.7
- PyCharm

### Environment Setup

1. Open the clone repository as a project with PyCharm;
2. Under the `stas/` directory of the cloned repository, run the following command in the terminal:

```bash
pip install -r requirements.txt 
```

### Usage

#### Collecting merge scenarios with refactoring-related merge conflict(s):

1. Edit `database.properties` to config MySql:

   ```python
   development.driver=com.mysql.jdbc.Driver
   development.username=<username>
   development.password=<password>
   development.url=jdbc:mysql://localhost//DBName
   ```

2. Edit the following code in `stats/data_resolver.py` to config repo information:

   ```python
   def get_merge_scenarios_involved_refactorings():
       # process one project each time
       repo_id = "ID"
       repo_name = "NAME"
       repo_paths = [
           'D:\\github\\repos\\'+repo_name
       ]
       csv_path = 'merge_scenarios_involved_refactorings_' + repo_name + '.csv'
   ```

3. Run the `main` function of `data_resolver.py` to get the csv file, which contains a summary of the collected data:

   ![summary](https://github.com/Symbolk/RefConfMiner/blob/master/screenshots/summary.png)

#### Calculate running time for IntelliMerge and jFSTMerge:

Run `stats/runtimes.py` with the `stats/runtimes.csv` file as the input, which is generated by evaluation programs in <https://github.com/Symbolk/IntelliMerge>.

```
Average running time:
IntelliMerge	1237.5151856017999ms
jFSTMerge	1932.0837642192348ms
Median running time:
IntelliMerge	367.0ms
jFSTMerge	1373.0ms
```

